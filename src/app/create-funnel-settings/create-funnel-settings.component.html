<div id="kb-createfunnelsettings">

    <div id="kb-buildfunnel-actions" *ngIf="popupsidebar">
      <div class="offcanvas offcanvas-right p-4 offcanvas-on loadEffectFromLeftsidebar">
        
        <i class="fas fa-times" (click)="hidepopupsidebar()"></i>
        <h6><strong>ARCHIVE</strong></h6>
        <hr>
        <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate class="pl-2">

          <mat-form-field class="kb-full-width" appearance="fill">
            <mat-label>Archive Reason</mat-label>
            <textarea matInput [(ngModel)]="form.reason" rows="10" name="reasons"></textarea>
            <small>Optional</small>
          </mat-form-field>

          <p>It will help you remember why you deleted it!</p>

          <button mat-raised-button color="primary" type="submit" >
            <i class="fas fa-archive"></i> Archive Funnel
          </button>

        </form>

      </div>
    </div>
    <div class="offcanvas-overlay " *ngIf="popupsidebar" (click)="hidepopupsidebar()"></div>
    
    <!-- <app-funnel-wizard-nav></app-funnel-wizard-nav> -->

    <div class="container-fluid loadEffect">
        <div class="row whitefunnel pt-5 pb-5">
            <div class="col-md-12">
              <div class="card">
                <div class="card-body">
                  <form action="#" class="wizard-vertical wizard clearfix vertical" id="steps-uid-2">
                    <div class="steps clearfix">
                      <ul>
                        <li class="first" [class]="tabOpen3 == 'basic' ? 'current' : ''">
                          <a (click)="kb_settingsteps('basic')">
                            <span class="fonticon-wrap mr-1">
                              <i class="fas fa-cog"></i>
                            </span>
                            <span class="icon-title">
                              <span class="d-block">Basic Details</span>
                              <small class="text-muted">Setup your details here.</small>
                            </span>
                          </a></li>
                        <li [class]="tabOpen3 == 'smtp' ? 'current' : ''" *ngIf="hidefornow"><a (click)="kb_settingsteps('smtp')">
                            <span class="fonticon-wrap mr-1">
                              <i class="fas fa-mail-bulk"></i>
                            </span>
                            <span class="icon-title">
                              <span class="d-block">SMTP Configuration</span>
                              <small class="text-muted">Your SMTP Details here.</small>
                            </span>
                          </a></li>
                        <li [class]="tabOpen3 == 'tracking' ? 'current' : ''"><a (click)="kb_settingsteps('tracking')">
                            <span class="fonticon-wrap mr-1">
                              <i class="fas fa-code"></i>
                            </span>
                            <span class="icon-title">
                              <span class="d-block">Tracking</span>
                              <small class="text-muted">Your tracking code details.</small>
                            </span>
                          </a></li>
                        <li [class]="tabOpen3 == 'payment' ? 'current' : ''"><a (click)="kb_settingsteps('payment')">
                            <span class="fonticon-wrap mr-1">
                              <i class="fas fa-money-check-alt"></i>
                            </span>
                            <span class="icon-title">
                              <span class="d-block">Payment</span>
                              <small class="text-muted">Payment integration.</small>
                            </span>
                          </a></li>
                      </ul>
                    </div>
                    <div class="content clearfix">
                      <!-- step 1 content -->
                      <fieldset class="pt-0 body  " *ngIf="tabOpen3 == 'basic'" id="steps-uid-2-p-0" role="tabpanel"
                        aria-labelledby="steps-uid-2-h-0" aria-hidden="false">
                        <h6 class="pb-50">Edit Settings For This Funnel</h6>

                        <div class="row mt-4">
                          <div class="col-sm-6">
                              <mat-form-field class="kb-full-width" appearance="fill">
                                <mat-label>Name</mat-label>
                                <input type="text" matInput placeholder="Funnel Name" name="funnelname" [(ngModel)]="funnelname" >
                              </mat-form-field>
                              <small class="text-muted form-text mt-n3">Name of this funnel</small>
                          </div>
                          <div class="col-sm-6">
                            <mat-form-field class="kb-full-width" appearance="fill">
                              <mat-label>Domain</mat-label>
                              <mat-select name="domainname" [(ngModel)]="domainname" >
                                <mat-option value="">None</mat-option>
                              </mat-select>
                            </mat-form-field>
                            <small class="text-muted form-text mt-n3">The domain for the funnel â€” <a href="#">Add/Edit Domains</a></small>
                          </div>
                        </div>

                        <div class="row mt-4">
                          <div class="col-sm-6">

                            <mat-form-field class="kb-full-width" appearance="fill">
                              <mat-label>Tags</mat-label>
                              <mat-chip-list #chipList aria-label="Fruit selection">
                                <mat-chip *ngFor="let tag of tags" (removed)="remove(tag)">
                                  {{tag}}
                                  <button matChipRemove>
                                    <mat-icon>cancel</mat-icon>
                                  </button>
                                </mat-chip>
                                <input placeholder="Group Tags..."
                                       [matChipInputFor]="chipList"
                                       [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                       [matChipInputAddOnBlur]="addOnBlur"
                                       (matChipInputTokenEnd)="add($event)">
                              </mat-chip-list>
                            </mat-form-field>

                            <small class="text-muted form-text mt-n3">The group this funnel belongs too</small>
                          </div>

                          <div class="col-sm-6">
                            <mat-form-field class="kb-full-width" appearance="fill">
                              <mat-label>Path</mat-label>
                              <input type="text" matInput disabled name="path" [value]="funnelpath">
                            </mat-form-field>
                            <small class="text-muted form-text mt-n3">The path of this funnels</small>

                          </div>
                        </div>

                        <div class="row mt-4">
                          <div class="col-sm-12">

                            <mat-form-field class="kb-full-width" appearance="fill">
                              <mat-label>Favicon Url</mat-label>
                              <input type="text" matInput placeholder="Ex: https://this.com/this.png" name="faviconurl" [(ngModel)]="faviconurl" >
                            </mat-form-field>
                            <small class="text-muted form-text mt-n3">Add a URL to your .png or .ico favicon image. For ALL your pages inside your funnel.</small>

                          </div>
                        </div>
                      </fieldset>
                      <!-- step 1 content end-->
                      <!-- step 2 content -->
                      <fieldset class="pt-0 body " *ngIf="tabOpen3 == 'smtp'" id="steps-uid-2-p-1" role="tabpanel"
                        aria-labelledby="steps-uid-2-h-1" aria-hidden="true">
                        <h6 class="py-50">Edit Settings For This Funnel</h6>
                        <div class="row">
                          <div class="col-sm-12">
                            <div class="form-group">
                              <label for="proposalTitle1"><a>SMTP Configuation</a></label><br>
                              <small>Provide your <a>Account SMTP Settings</a> to customize outgoing emails from Keabuilder.</small>
                            </div>
                          </div>
                        </div>
                      </fieldset>
                      <!-- step 2 content end-->
                      <!-- step 3 content -->
                      <fieldset class="pt-0 body " *ngIf="tabOpen3 == 'tracking'" id="steps-uid-2-p-2"
                        role="tabpanel" aria-labelledby="steps-uid-2-h-2" aria-hidden="true">
                        <h6 class="py-50">Edit Settings For This Funnel</h6>
                        <div class="row">

                          <div class="col-sm-6">
                            <mat-form-field class="kb-full-width" appearance="fill">
                              <mat-label>Head Tracking Code</mat-label>
                              <textarea rows="10" matInput name="headtrack" [(ngModel)]="headertracking" ></textarea>
                            </mat-form-field>
                            <small class="mt-n3 form-text">Funnel wide tracking code for the head tag.</small>
                          </div>

                          <div class="col-sm-6">
                            <mat-form-field class="kb-full-width" appearance="fill">
                              <mat-label>Body Tracking Code</mat-label>
                              <textarea rows="10" matInput  name="bodytrack" [(ngModel)]="bodytracking" ></textarea>
                            </mat-form-field>
                            <small class="mt-n3 form-text">Funnel wide tracking codes for the body tag.</small>
                          </div>

                        </div>
                      </fieldset>
                      <!-- step 3 content end-->
                      <!-- step 4 content -->
                      <fieldset class="pt-0 body " *ngIf="tabOpen3 == 'payment'" id="steps-uid-2-p-3"
                        role="tabpanel" aria-labelledby="steps-uid-2-h-3" aria-hidden="true">
                        <h6 class="py-50">Edit Settings For This Funnel</h6>
                        <div class="row">
                          <div class="col-md-2">
                            <div class="kb-payment-stripe-i">
                              <i class="fab fa-stripe"></i>
                            </div>
                          </div>
                          <div class="col-md-10">
                            <div class="form-group">
                              <mat-form-field class="kb-full-width" appearance="fill">
                                <mat-label>Stripe Account</mat-label>
                                <mat-select>
                                  <mat-option>Account not connnected</mat-option>
                                </mat-select>
                              </mat-form-field>
                              <br>
                              <label for="">Test Mode</label>
                              <p style="line-height: 16px;">
                                <small style="line-height:10px;">Enable Test Mode for Stripe. Use CC number: 4012888888881881
                                  with any future Exp date and CVV number. Note: To test subscriptions, you MUST have
                                  subscription plans with the same ID in Stripe in Test mode and Live mode. In test mode disc
                                  delivered will not operate.</small>
                              </p>
                              <small>
                                <a href="">Edit Stripe Details</a>
                              </small>
                            </div>
                          </div>
                          <div class="col-md-12" *ngIf="hidefornow">
                            <hr>
                          </div>
      
                          <div class="col-md-2" *ngIf="hidefornow">
                            <div class="kb-payment-stripe-i">
                              <i class="fab fa-cc-paypal"></i>
                            </div>
                          </div>
                          <div class="col-md-10" *ngIf="hidefornow">
                            <div class="form-group">
                              <mat-form-field class="kb-full-width" appearance="fill">
                                <mat-label>Paypal Account</mat-label>
                                <mat-select>
                                  <mat-option>Account not connnected</mat-option>
                                </mat-select>
                              </mat-form-field>
                              <br>
                              <label for="">Test Mode</label>
                              <p style="line-height: 16px;">
                                <small style="line-height:10px;">Enable Test Mode for Stripe. Use CC number: 4012888888881881
                                  with any future Exp date and CVV number. Note: To test subscriptions, you MUST have
                                  subscription plans with the same ID in Stripe in Test mode and Live mode. In test mode disc
                                  delivered will not operate.</small>
                              </p>
                              <small>
                                <a href="">Edit Stripe Details</a>
                              </small>
                            </div>
                          </div>
                        </div>
                      </fieldset>
                      <!-- step 4 content end-->
                    </div>
                    <div class="actions clearfix " id="kb-settingsaction">
                      <ul>
                        <li class="ml-2">
                          <a mat-raised-button color="accent" (click)="showpopup()">
                            <i class="fas fa-archive"></i> Archive Funnel
                          </a>
                        </li>
      
                        <li class="ml-2">
                          <a mat-raised-button color="accent" (click)="viewarchivefunnel()">
                            <i class="fas fa-binoculars"></i> View Archive Funnel Steps
                          </a>
                        </li>
      
                        <li class="ml-2">
                          <a mat-raised-button color="primary" (click)="updatesetting()" >
                            <span *ngIf="processon"><i class="fas fa-spinner fa-spin"></i> Processing...</span>
                            <span *ngIf="!processon" ><i class="far fa-check-circle"></i> {{processondata}}</span>
                          </a>
                        </li>
                      </ul>
                    </div>
                  </form>
                </div>
              </div>
            </div>
        </div>
    </div>

</div>
