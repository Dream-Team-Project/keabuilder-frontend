<div class="container-fluid">

  <div id="kb-automation-actions" *ngIf="poupsidebar && automationaddnewaction">
    <div class="offcanvas offcanvas-right p-4 offcanvas-on">
      
      <i class="fas fa-times" (click)="hidepopupsidebar()"></i>
      <h6><b>NEW COURSE STEPS</b></h6>
      <hr>
      <mat-form-field class="kb-full-width" appearance="fill">
        <mat-label>Title</mat-label>
        <input type="text" matInput placeholder="Ex. 10 Days to Productivity" required minlength="3" maxlength="140" >
      </mat-form-field>

      <mat-form-field class="kb-full-width" appearance="fill">
        <mat-label>Description</mat-label>
        <textarea matInput></textarea>
      </mat-form-field>

      <p>Product Thumbnail</p>
      <div id="img-preview" class="mb-2"></div>
      <input type="file" name="" (change)="changeme($event)" id="fileElem" accept=".png, .jpg, .jpeg" class="drop-zone__input">
      <div id="imgdiv" (click)="OnOpen()"><span class="drop-zone__prompt">Click to upload</span></div>
      <p class="mt-2"><small class="text-danger">{{typeerror}}</small></p>
      
      <mat-form-field class="kb-full-width" appearance="fill" >
        <mat-label>Offers</mat-label>
        <mat-select [formControl]="offers" multiple>
          <mat-select-trigger>
            {{offers.value ? offers.value[0] : ''}}
            <span *ngIf="offers.value?.length > 1" class="example-additional-selection">
              (+{{offers.value.length - 1}} {{offers.value?.length === 2 ? 'other' : 'others'}})
            </span>
          </mat-select-trigger>
          <mat-option *ngFor="let offer of offersList" [value]="offer">{{offer}}</mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-raised-button color="primary" ><i class="fas fa-plus"></i> Create Course</button>

    </div>
  </div>
  <div class="offcanvas-overlay " *ngIf="poupsidebar" (click)="hidepopupsidebar()"></div>

  <div class="row mt-4" *ngIf="addnewpages">
      <div class="col-md-12 mb-4">
        <a href="javascript:void(0)" (click)="addnewcourse()">
          <mat-card class="outer-card-add">
            Add New Course
          </mat-card>
        </a>
      </div>
        <div class="col-md-4 cardpage mt-10 loadEffect" *ngFor="let kbpage of kbcourses; index as i;">
        <div>
            <img [src]="kbcourses[i]['thumbnail']" alt="" class="img-fluid img-fit">

            <div class="keabuilder-title-board line-ellipsis" matTooltip="Edit Course Name" matTooltipPosition="above">
              <span>{{kbcourses[i]['page_name']}}</span>
              <input type="text" [(ngModel)]="kbcourses[i]['page_name']">
            </div>
            <div class="statbadg" matTooltip="Status" matTooltipPosition="above">
              <span class="statusbadge" [class]="kbcourses[i]['publish_status']==1 ? 'active1':'active2'"
                  (click)="kbcourses[i].dropdownstatus = !kbcourses[i].dropdownstatus">
                  <i class="fas" [class]="kbcourses[i]['publish_status']==1 ? 'fa-check':'fa-file'"></i>
                  {{kbcourses[i]['publish_status']==1?'Publish':'Draft'}} <i class="fas fa-chevron-down drpdwnfa"></i>
              </span>
              <div class="kb-dropdown__panel kb-dropdown__status" *ngIf="kbcourses[i].dropdownstatus" >
                  <ul class="kb-dropdown__menu">
                  <li>
                      <a href=""><i class="fa fa-check pr-2"></i> Publish</a>
                  </li>
                  <li>
                      <a href=""><i class="fa fa-file pr-2"></i> Draft</a>
                  </li>
                  </ul>
              </div>
            </div>
            <p class="kb-pagedate"><span [matTooltip]="kbcourses[i]['members']+' Members'" matTooltipPosition="above"><i class="fa fa-user" aria-hidden="true"></i> {{kbcourses[i]['members']}}</span> &nbsp; <i class="fa fa-calendar" aria-hidden="true"></i> {{kbcourses[i]['updated_at']}}</p>

            <button class="btn btn-secondary">Preview <i class="far fa-eye"></i></button>
            <button class="btn btn-primary">Edit <i class="fas fa-pencil-alt"></i></button>

            <div class="kb-page-settting" (click)="kbcourses[i].itemshow = !kbcourses[i].itemshow" matTooltip="Settings" matTooltipPosition="above"><i class="fas fa-cog"></i>
            </div>
            <div *ngIf="kbcourses[i].itemshow" class="kb-dropdown__panel">
            <ul class="kb-dropdown__menu">
                <li class=""><a href="#" class=""><i class="fas fa-pen pr-2"></i>Edit details </a></li>
                <li class=""><a href="#" class=""><i class="fas fa-chart-pie pr-2"></i>View Analytics</a></li>
                <li class=""><a href="#" class=""><i class="far fa-copy pr-2"></i>Duplicate</a></li>
                <li class=""><a href="#" class=""><i class="fas fa-link pr-2"></i>Copy URL</a></li>
                <li class="kb-border-before"><a href="#" class="text-danger"><i class="fas fa-trash pr-2"></i>Delete
                    Course</a></li>
            </ul>
            </div>
        </div>
        </div>
  </div>

</div>